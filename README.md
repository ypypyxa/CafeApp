# CoffeeSpot

## Описание

Приложение разработано в рамках тестового задания. Основной функционал включает:
- Splashscreen
- Экран входа с валидацией email и пароля
- Экран регистрации
- Экран списка кофеен
- Экран карты с маркерами кофеен
- Экран меню кофейни
- Экран заказа

---

## Технологии

- `Kotlin`
- `Retrofit`
- `Room`, `DataStore`
- `Coroutines`, `Flow`
- `Hilt`
- `MVVM`, `MVI`
- `Clean Architecture`
- `Compose`

---

## Установка и запуск
1. Клонировать репозиторий:
```bash
git clone https://github.com/ypypyxa/CafeApp
```
2. Открыть в Android Studio
3. Создать файл `developer.properties` в корне проекта, вставить туда строчку с вашим ключом для Яндекс.Mapkit вида:
```
MAPKIT_API_KEY = YOUR_API_KEY
```
    и собрать проект

5. minSdk 29(Android 10)

---

## Экраны

### Splashscreen
- Во время анимации идет проверка истек ли токен или нет, но так как от бэка tokenLifetime приходит `0`, то задумка не работает...
- Ну и вообще это красиво))
- Позже перенесу туда логику, связанную с загрузкой меню

![Splashscreen](https://iili.io/FigK4UB.md.png)

### Вход
- Поле Email принимает текст по маске `текст@текст.текст`
- Пароль — латинские символы, минимум 8 знаков, разного регистра и должен содержать хотя бы одну цифру
- Если поля невалидны или пусты — кнопка входа неактивна
- Если нет аккаунта то на кнопку `Нет аккаунта? Регистрация` можно перейти на окно регистрации 
- Если логин и пароль валидны — нажатие на кнопку `Войти` отправляет пользователя на список кофеен

![Экран входа](https://iili.io/FiUMGZg.md.png)

### Регистрация
- Поле Email принимает текст по маске `текст@текст.текст`
- Пароль — латинские символы, минимум 8 знаков, разного регистра и должен содержать хотя бы одну цифру
- Если поля невалидны или пусты — кнопка регистрации неактивна
- Если поля пароля и подтверждения не совпадают — выдаст ошибку
- Если логин и пароль валидны — нажатие на кнопку `Регистрация` отправляет пользователя на список кофеен

![Регистрация](https://iili.io/FiUMlyP.md.png)

### Экран списка кофеен
- Если пользователь разрешит использование геопозиции, то экран покажет расстояние до кофеен, иначе покажет "Расстояние неизвестно" 
- Нажатие на элемент списка отправит пользователя на экран меню кофейни
- Нажатие на кнопку `Назад` — вызовит выход из аккаунта и возврат на экран аутентификации
- Нажатие на кнопку `На карту` — отправит пользователя на экран карты

![Экран списка кофеен](https://iili.io/FiUMUns.md.png)

### Экран карты
- Если пользователь разрешит использование геопозиции, то алгоритм покажет Ваше местоположение и кофейни
- Если пользователь запретит использование геопозиции, то алгоритм покажет только кофейни
- Нажатие на `маркер кофейни` отправит пользователя на экран меню кофейни (пока работает через раз Т_Т)
- Нажатие на кнопку `Назад` — отправит пользователя на экран списка кофеен

/-------/-------/
/ пользователь разрешил геопозицию / пользователь запретил геопозицию /
/ ![Экран карты](https://iili.io/FiUM8tn.md.png) / ![Экран карты](https://iili.io/FiUMPcl.md.png) /
/-------/-------/

### Экран меню кофейни
- Нажатие на `+` увеличит счетчик элемента меню и сохранит его в БД корзины с привязкой к `id пользователя` и `id кофейни`
- Нажатие на `-` уменьшит счетчик элемента меню и если счетчик равен `0` — удалит этот элемент из БД корзины
- Нажатие на кнопку `Назад` — вернет пользователя на экран списка кофеен или карты, в зависимости от его маршрута
- Нажатие на кнопку `Перейти к оплате` — отправит пользователя на экран оплаты

![Экран меню кофейни](https://iili.io/FiUMiS2.md.png)

### Экран оплаты
- Тут показано название кофейни в которой пользователь делает заказ
- Нажатие на `+` увеличит счетчик элемента меню и сохранит его в БД корзины с привязкой к `id пользователя` и `id кофейни`
- Нажатие на `-` уменьшит счетчик элемента меню и если счетчик равен `0` — удалит этот элемент из БД корзины
- `Итого` показывает сумму заказа
- Нажатие на кнопку `Назад` — вернет пользователя на экран меню кофейни
- Нажатие на кнопку `Оплатить` — вызовет сообщение с успешным заказом и удалит все элеменнты из БД корзины по `id кофейни`

![Экран оплаты](https://iili.io/FiUMQA7.md.png)

---

## Лицензия
Этот проект распространяется под лицензией MIT. См. файл [LICENSE](LICENSE) для деталей.
